{"code":"import { CurrencyAmount, validateAndParseAddress } from '@uniswap/sdk-core';\r\nimport JSBI from 'jsbi';\r\nimport invariant from 'tiny-invariant';\r\nimport { Position } from './entities/position';\r\nimport { ONE, ZERO } from './internalConstants';\r\nimport { toHex } from './utils/calldata';\r\nimport { Interface } from '@ethersproject/abi';\r\nimport INonfungiblePositionManager from '@uniswap/v3-periphery/artifacts/contracts/NonfungiblePositionManager.sol/NonfungiblePositionManager.json';\r\nimport { SelfPermit } from './selfPermit';\r\nimport { ADDRESS_ZERO } from './constants';\r\nimport { Multicall } from './multicall';\r\nimport { Payments } from './payments';\r\nconst MaxUint128 = toHex(JSBI.subtract(JSBI.exponentiate(JSBI.BigInt(2), JSBI.BigInt(128)), JSBI.BigInt(1)));\r\n// type guard\r\nfunction isMint(options) {\r\n    return Object.keys(options).some(k => k === 'recipient');\r\n}\r\nexport class NonfungiblePositionManager {\r\n    /**\r\n     * Cannot be constructed.\r\n     */\r\n    constructor() { }\r\n    static encodeCreate(pool) {\r\n        return NonfungiblePositionManager.INTERFACE.encodeFunctionData('createAndInitializePoolIfNecessary', [\r\n            pool.token0.address,\r\n            pool.token1.address,\r\n            pool.fee,\r\n            toHex(pool.sqrtRatioX96)\r\n        ]);\r\n    }\r\n    static createCallParameters(pool) {\r\n        return {\r\n            calldata: this.encodeCreate(pool),\r\n            value: toHex(0)\r\n        };\r\n    }\r\n    static addCallParameters(position, options) {\r\n        invariant(JSBI.greaterThan(position.liquidity, ZERO), 'ZERO_LIQUIDITY');\r\n        const calldatas = [];\r\n        // 获取金额\r\n        const { amount0: amount0Desired, amount1: amount1Desired } = position.mintAmounts;\r\n        // 调整滑点\r\n        const minimumAmounts = position.mintAmountsWithSlippage(options.slippageTolerance);\r\n        const amount0Min = toHex(minimumAmounts.amount0);\r\n        const amount1Min = toHex(minimumAmounts.amount1);\r\n        const deadline = toHex(options.deadline);\r\n        // 输出position和options的相关信息\r\n        console.log(\"Position Information:\", position);\r\n        console.log(\"AddLiquidityOptions:\", options);\r\n        console.log(\"Amount0 Desired:\", amount0Desired.toString());\r\n        console.log(\"Amount1 Desired:\", amount1Desired.toString());\r\n        console.log(\"Amount0 Min (after slippage):\", amount0Min);\r\n        console.log(\"Amount1 Min (after slippage):\", amount1Min);\r\n        console.log(\"Deadline:\", deadline);\r\n        // 如果需要创建池\r\n        if (isMint(options) && options.createPool) {\r\n            console.log(\"Creating Pool with Pool Info:\", position.pool);\r\n            calldatas.push(this.encodeCreate(position.pool));\r\n        }\r\n        // 如果需要permit\r\n        if (options.token0Permit) {\r\n            console.log(\"Adding Permit for Token0:\", position.pool.token0);\r\n            calldatas.push(SelfPermit.encodePermit(position.pool.token0, options.token0Permit));\r\n        }\r\n        if (options.token1Permit) {\r\n            console.log(\"Adding Permit for Token1:\", position.pool.token1);\r\n            calldatas.push(SelfPermit.encodePermit(position.pool.token1, options.token1Permit));\r\n        }\r\n        // mint\r\n        if (isMint(options)) {\r\n            const recipient = validateAndParseAddress(options.recipient);\r\n            // 打印 mint 参数信息\r\n            console.log(\"Mint Parameters:\", {\r\n                token0: position.pool.token0.address,\r\n                token1: position.pool.token1.address,\r\n                fee: position.pool.fee,\r\n                tickLower: position.tickLower,\r\n                tickUpper: position.tickUpper,\r\n                amount0Desired: toHex(amount0Desired),\r\n                amount1Desired: toHex(amount1Desired),\r\n                amount0Min,\r\n                amount1Min,\r\n                recipient,\r\n                deadline\r\n            });\r\n            calldatas.push(NonfungiblePositionManager.INTERFACE.encodeFunctionData('mint', [\r\n                {\r\n                    token0: position.pool.token0.address,\r\n                    token1: position.pool.token1.address,\r\n                    fee: position.pool.fee,\r\n                    tickLower: position.tickLower,\r\n                    tickUpper: position.tickUpper,\r\n                    amount0Desired: toHex(amount0Desired),\r\n                    amount1Desired: toHex(amount1Desired),\r\n                    amount0Min,\r\n                    amount1Min,\r\n                    recipient,\r\n                    deadline\r\n                }\r\n            ]));\r\n        }\r\n        else {\r\n            // 增加流动性\r\n            console.log(\"Increase Liquidity Parameters:\", {\r\n                tokenId: toHex(options.tokenId),\r\n                amount0Desired: toHex(amount0Desired),\r\n                amount1Desired: toHex(amount1Desired),\r\n                amount0Min,\r\n                amount1Min,\r\n                deadline\r\n            });\r\n            calldatas.push(NonfungiblePositionManager.INTERFACE.encodeFunctionData('increaseLiquidity', [\r\n                {\r\n                    tokenId: toHex(options.tokenId),\r\n                    amount0Desired: toHex(amount0Desired),\r\n                    amount1Desired: toHex(amount1Desired),\r\n                    amount0Min,\r\n                    amount1Min,\r\n                    deadline\r\n                }\r\n            ]));\r\n        }\r\n        let value = toHex(0);\r\n        // 使用原生代币\r\n        if (options.useNative) {\r\n            const wrapped = options.useNative.wrapped;\r\n            invariant(position.pool.token0.equals(wrapped) || position.pool.token1.equals(wrapped), 'NO_WETH');\r\n            const wrappedValue = position.pool.token0.equals(wrapped) ? amount0Desired : amount1Desired;\r\n            console.log(\"Use Native Token. Wrapped Value:\", wrappedValue.toString());\r\n            // 只有在真正发送 ETH 时才需要退款\r\n            if (JSBI.greaterThan(wrappedValue, ZERO)) {\r\n                calldatas.push(Payments.encodeRefundETH());\r\n            }\r\n            value = toHex(wrappedValue);\r\n        }\r\n        console.log(\"Final Calldata:\", Multicall.encodeMulticall(calldatas));\r\n        console.log(\"Value to send:\", value);\r\n        return {\r\n            calldata: Multicall.encodeMulticall(calldatas),\r\n            value\r\n        };\r\n    }\r\n    static encodeCollect(options) {\r\n        const calldatas = [];\r\n        const tokenId = toHex(options.tokenId);\r\n        const involvesETH = options.expectedCurrencyOwed0.currency.isNative || options.expectedCurrencyOwed1.currency.isNative;\r\n        const recipient = validateAndParseAddress(options.recipient);\r\n        // collect\r\n        calldatas.push(NonfungiblePositionManager.INTERFACE.encodeFunctionData('collect', [\r\n            {\r\n                tokenId,\r\n                recipient: involvesETH ? ADDRESS_ZERO : recipient,\r\n                amount0Max: MaxUint128,\r\n                amount1Max: MaxUint128\r\n            }\r\n        ]));\r\n        if (involvesETH) {\r\n            const ethAmount = options.expectedCurrencyOwed0.currency.isNative\r\n                ? options.expectedCurrencyOwed0.quotient\r\n                : options.expectedCurrencyOwed1.quotient;\r\n            const token = options.expectedCurrencyOwed0.currency.isNative\r\n                ? options.expectedCurrencyOwed1.currency\r\n                : options.expectedCurrencyOwed0.currency;\r\n            const tokenAmount = options.expectedCurrencyOwed0.currency.isNative\r\n                ? options.expectedCurrencyOwed1.quotient\r\n                : options.expectedCurrencyOwed0.quotient;\r\n            calldatas.push(Payments.encodeUnwrapWETH9(ethAmount, recipient));\r\n            calldatas.push(Payments.encodeSweepToken(token, tokenAmount, recipient));\r\n        }\r\n        return calldatas;\r\n    }\r\n    static collectCallParameters(options) {\r\n        const calldatas = NonfungiblePositionManager.encodeCollect(options);\r\n        return {\r\n            calldata: Multicall.encodeMulticall(calldatas),\r\n            value: toHex(0)\r\n        };\r\n    }\r\n    /**\r\n     * Produces the calldata for completely or partially exiting a position\r\n     * @param position The position to exit\r\n     * @param options Additional information necessary for generating the calldata\r\n     * @returns The call parameters\r\n     */\r\n    static removeCallParameters(position, options) {\r\n        const calldatas = [];\r\n        const deadline = toHex(options.deadline);\r\n        const tokenId = toHex(options.tokenId);\r\n        // construct a partial position with a percentage of liquidity\r\n        const partialPosition = new Position({\r\n            pool: position.pool,\r\n            liquidity: options.liquidityPercentage.multiply(position.liquidity).quotient,\r\n            tickLower: position.tickLower,\r\n            tickUpper: position.tickUpper\r\n        });\r\n        invariant(JSBI.greaterThan(partialPosition.liquidity, ZERO), 'ZERO_LIQUIDITY');\r\n        // slippage-adjusted underlying amounts\r\n        const { amount0: amount0Min, amount1: amount1Min } = partialPosition.burnAmountsWithSlippage(options.slippageTolerance);\r\n        if (options.permit) {\r\n            calldatas.push(NonfungiblePositionManager.INTERFACE.encodeFunctionData('permit', [\r\n                validateAndParseAddress(options.permit.spender),\r\n                tokenId,\r\n                toHex(options.permit.deadline),\r\n                options.permit.v,\r\n                options.permit.r,\r\n                options.permit.s\r\n            ]));\r\n        }\r\n        // remove liquidity\r\n        calldatas.push(NonfungiblePositionManager.INTERFACE.encodeFunctionData('decreaseLiquidity', [\r\n            {\r\n                tokenId,\r\n                liquidity: toHex(partialPosition.liquidity),\r\n                amount0Min: toHex(amount0Min),\r\n                amount1Min: toHex(amount1Min),\r\n                deadline\r\n            }\r\n        ]));\r\n        const { expectedCurrencyOwed0, expectedCurrencyOwed1, ...rest } = options.collectOptions;\r\n        calldatas.push(...NonfungiblePositionManager.encodeCollect({\r\n            tokenId: toHex(options.tokenId),\r\n            // add the underlying value to the expected currency already owed\r\n            expectedCurrencyOwed0: expectedCurrencyOwed0.add(CurrencyAmount.fromRawAmount(expectedCurrencyOwed0.currency, amount0Min)),\r\n            expectedCurrencyOwed1: expectedCurrencyOwed1.add(CurrencyAmount.fromRawAmount(expectedCurrencyOwed1.currency, amount1Min)),\r\n            ...rest\r\n        }));\r\n        if (options.liquidityPercentage.equalTo(ONE)) {\r\n            if (options.burnToken) {\r\n                calldatas.push(NonfungiblePositionManager.INTERFACE.encodeFunctionData('burn', [tokenId]));\r\n            }\r\n        }\r\n        else {\r\n            invariant(options.burnToken !== true, 'CANNOT_BURN');\r\n        }\r\n        return {\r\n            calldata: Multicall.encodeMulticall(calldatas),\r\n            value: toHex(0)\r\n        };\r\n    }\r\n    static safeTransferFromParameters(options) {\r\n        const recipient = validateAndParseAddress(options.recipient);\r\n        const sender = validateAndParseAddress(options.sender);\r\n        let calldata;\r\n        if (options.data) {\r\n            calldata = NonfungiblePositionManager.INTERFACE.encodeFunctionData('safeTransferFrom(address,address,uint256,bytes)', [sender, recipient, toHex(options.tokenId), options.data]);\r\n        }\r\n        else {\r\n            calldata = NonfungiblePositionManager.INTERFACE.encodeFunctionData('safeTransferFrom(address,address,uint256)', [\r\n                sender,\r\n                recipient,\r\n                toHex(options.tokenId)\r\n            ]);\r\n        }\r\n        return {\r\n            calldata: calldata,\r\n            value: toHex(0)\r\n        };\r\n    }\r\n}\r\nNonfungiblePositionManager.INTERFACE = new Interface(INonfungiblePositionManager.abi);\r\n//# sourceMappingURL=nonfungiblePositionManager.js.map","references":["/Users/luozhiwei/project/uniswap/v3-sdk/node_modules/@uniswap/sdk-core/dist/index.d.ts","/Users/luozhiwei/project/uniswap/v3-sdk/node_modules/jsbi/jsbi.d.ts","/Users/luozhiwei/project/uniswap/v3-sdk/node_modules/tiny-invariant/dist/tiny-invariant.d.ts","/Users/luozhiwei/project/uniswap/v3-sdk/src/entities/position.ts","/Users/luozhiwei/project/uniswap/v3-sdk/src/internalConstants.ts","/Users/luozhiwei/project/uniswap/v3-sdk/src/utils/calldata.ts","/Users/luozhiwei/project/uniswap/v3-sdk/node_modules/@ethersproject/abi/lib/index.d.ts","/Users/luozhiwei/project/uniswap/v3-sdk/node_modules/@uniswap/v3-periphery/artifacts/contracts/NonfungiblePositionManager.sol/NonfungiblePositionManager.json","/Users/luozhiwei/project/uniswap/v3-sdk/src/selfPermit.ts","/Users/luozhiwei/project/uniswap/v3-sdk/src/constants.ts","/Users/luozhiwei/project/uniswap/v3-sdk/src/entities/index.ts","/Users/luozhiwei/project/uniswap/v3-sdk/src/multicall.ts","/Users/luozhiwei/project/uniswap/v3-sdk/src/payments.ts"],"map":"{\"version\":3,\"file\":\"nonfungiblePositionManager.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/nonfungiblePositionManager.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAIL,cAAc,EACd,uBAAuB,EAGxB,MAAM,mBAAmB,CAAA;AAC1B,OAAO,IAAI,MAAM,MAAM,CAAA;AACvB,OAAO,SAAS,MAAM,gBAAgB,CAAA;AACtC,OAAO,EAAE,QAAQ,EAAE,MAAM,qBAAqB,CAAA;AAC9C,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,MAAM,qBAAqB,CAAA;AAC/C,OAAO,EAAoB,KAAK,EAAE,MAAM,kBAAkB,CAAA;AAC1D,OAAO,EAAE,SAAS,EAAE,MAAM,oBAAoB,CAAA;AAC9C,OAAO,2BAA2B,MAAM,0GAA0G,CAAA;AAClJ,OAAO,EAAiB,UAAU,EAAE,MAAM,cAAc,CAAA;AACxD,OAAO,EAAE,YAAY,EAAE,MAAM,aAAa,CAAA;AAE1C,OAAO,EAAE,SAAS,EAAE,MAAM,aAAa,CAAA;AACvC,OAAO,EAAE,QAAQ,EAAE,MAAM,YAAY,CAAA;AAErC,MAAM,UAAU,GAAG,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;AA6E5G,aAAa;AACb,SAAS,MAAM,CAAC,OAA4B;IAC1C,OAAO,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,WAAW,CAAC,CAAA;AAC1D,CAAC;AAwED,MAAM,OAAgB,0BAA0B;IAG9C;;OAEG;IACH,gBAAuB,CAAC;IAEhB,MAAM,CAAC,YAAY,CAAC,IAAU;QACpC,OAAO,0BAA0B,CAAC,SAAS,CAAC,kBAAkB,CAAC,oCAAoC,EAAE;YACnG,IAAI,CAAC,MAAM,CAAC,OAAO;YACnB,IAAI,CAAC,MAAM,CAAC,OAAO;YACnB,IAAI,CAAC,GAAG;YACR,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC;SACzB,CAAC,CAAA;IACJ,CAAC;IAEM,MAAM,CAAC,oBAAoB,CAAC,IAAU;QAC3C,OAAO;YACL,QAAQ,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC;YACjC,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;SAChB,CAAA;IACH,CAAC;IAEM,MAAM,CAAC,iBAAiB,CAAC,QAAkB,EAAE,OAA4B;QAC9E,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,EAAE,IAAI,CAAC,EAAE,gBAAgB,CAAC,CAAA;QAEvE,MAAM,SAAS,GAAa,EAAE,CAAA;QAE9B,OAAO;QACP,MAAM,EAAE,OAAO,EAAE,cAAc,EAAE,OAAO,EAAE,cAAc,EAAE,GAAG,QAAQ,CAAC,WAAW,CAAA;QAEjF,OAAO;QACP,MAAM,cAAc,GAAG,QAAQ,CAAC,uBAAuB,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAA;QAClF,MAAM,UAAU,GAAG,KAAK,CAAC,cAAc,CAAC,OAAO,CAAC,CAAA;QAChD,MAAM,UAAU,GAAG,KAAK,CAAC,cAAc,CAAC,OAAO,CAAC,CAAA;QAChD,MAAM,QAAQ,GAAG,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAA;QAExC,0BAA0B;QAC1B,OAAO,CAAC,GAAG,CAAC,uBAAuB,EAAE,QAAQ,CAAC,CAAA;QAC9C,OAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE,OAAO,CAAC,CAAA;QAC5C,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,cAAc,CAAC,QAAQ,EAAE,CAAC,CAAA;QAC1D,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,cAAc,CAAC,QAAQ,EAAE,CAAC,CAAA;QAC1D,OAAO,CAAC,GAAG,CAAC,+BAA+B,EAAE,UAAU,CAAC,CAAA;QACxD,OAAO,CAAC,GAAG,CAAC,+BAA+B,EAAE,UAAU,CAAC,CAAA;QACxD,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAA;QAElC,UAAU;QACV,IAAI,MAAM,CAAC,OAAO,CAAC,IAAI,OAAO,CAAC,UAAU,EAAE;YACzC,OAAO,CAAC,GAAG,CAAC,+BAA+B,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAA;YAC3D,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAA;SACjD;QAED,aAAa;QACb,IAAI,OAAO,CAAC,YAAY,EAAE;YACxB,OAAO,CAAC,GAAG,CAAC,2BAA2B,EAAE,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;YAC9D,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,OAAO,CAAC,YAAY,CAAC,CAAC,CAAA;SACpF;QACD,IAAI,OAAO,CAAC,YAAY,EAAE;YACxB,OAAO,CAAC,GAAG,CAAC,2BAA2B,EAAE,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;YAC9D,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,OAAO,CAAC,YAAY,CAAC,CAAC,CAAA;SACpF;QAED,OAAO;QACP,IAAI,MAAM,CAAC,OAAO,CAAC,EAAE;YACnB,MAAM,SAAS,GAAW,uBAAuB,CAAC,OAAO,CAAC,SAAS,CAAC,CAAA;YAEpE,eAAe;YACf,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE;gBAC9B,MAAM,EAAE,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO;gBACpC,MAAM,EAAE,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO;gBACpC,GAAG,EAAE,QAAQ,CAAC,IAAI,CAAC,GAAG;gBACtB,SAAS,EAAE,QAAQ,CAAC,SAAS;gBAC7B,SAAS,EAAE,QAAQ,CAAC,SAAS;gBAC7B,cAAc,EAAE,KAAK,CAAC,cAAc,CAAC;gBACrC,cAAc,EAAE,KAAK,CAAC,cAAc,CAAC;gBACrC,UAAU;gBACV,UAAU;gBACV,SAAS;gBACT,QAAQ;aACT,CAAC,CAAA;YAEF,SAAS,CAAC,IAAI,CACZ,0BAA0B,CAAC,SAAS,CAAC,kBAAkB,CAAC,MAAM,EAAE;gBAC9D;oBACE,MAAM,EAAE,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO;oBACpC,MAAM,EAAE,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO;oBACpC,GAAG,EAAE,QAAQ,CAAC,IAAI,CAAC,GAAG;oBACtB,SAAS,EAAE,QAAQ,CAAC,SAAS;oBAC7B,SAAS,EAAE,QAAQ,CAAC,SAAS;oBAC7B,cAAc,EAAE,KAAK,CAAC,cAAc,CAAC;oBACrC,cAAc,EAAE,KAAK,CAAC,cAAc,CAAC;oBACrC,UAAU;oBACV,UAAU;oBACV,SAAS;oBACT,QAAQ;iBACT;aACF,CAAC,CACH,CAAA;SACF;aAAM;YACL,QAAQ;YACR,OAAO,CAAC,GAAG,CAAC,gCAAgC,EAAE;gBAC5C,OAAO,EAAE,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC;gBAC/B,cAAc,EAAE,KAAK,CAAC,cAAc,CAAC;gBACrC,cAAc,EAAE,KAAK,CAAC,cAAc,CAAC;gBACrC,UAAU;gBACV,UAAU;gBACV,QAAQ;aACT,CAAC,CAAA;YAEF,SAAS,CAAC,IAAI,CACZ,0BAA0B,CAAC,SAAS,CAAC,kBAAkB,CAAC,mBAAmB,EAAE;gBAC3E;oBACE,OAAO,EAAE,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC;oBAC/B,cAAc,EAAE,KAAK,CAAC,cAAc,CAAC;oBACrC,cAAc,EAAE,KAAK,CAAC,cAAc,CAAC;oBACrC,UAAU;oBACV,UAAU;oBACV,QAAQ;iBACT;aACF,CAAC,CACH,CAAA;SACF;QAED,IAAI,KAAK,GAAW,KAAK,CAAC,CAAC,CAAC,CAAA;QAE5B,SAAS;QACT,IAAI,OAAO,CAAC,SAAS,EAAE;YACrB,MAAM,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,OAAO,CAAA;YACzC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,SAAS,CAAC,CAAA;YAElG,MAAM,YAAY,GAAG,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,cAAc,CAAA;YAE3F,OAAO,CAAC,GAAG,CAAC,kCAAkC,EAAE,YAAY,CAAC,QAAQ,EAAE,CAAC,CAAA;YAExE,qBAAqB;YACrB,IAAI,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,IAAI,CAAC,EAAE;gBACxC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,eAAe,EAAE,CAAC,CAAA;aAC3C;YAED,KAAK,GAAG,KAAK,CAAC,YAAY,CAAC,CAAA;SAC5B;QAED,OAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,SAAS,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC,CAAA;QACpE,OAAO,CAAC,GAAG,CAAC,gBAAgB,EAAE,KAAK,CAAC,CAAA;QAEpC,OAAO;YACL,QAAQ,EAAE,SAAS,CAAC,eAAe,CAAC,SAAS,CAAC;YAC9C,KAAK;SACN,CAAA;IACH,CAAC;IAEO,MAAM,CAAC,aAAa,CAAC,OAAuB;QAClD,MAAM,SAAS,GAAa,EAAE,CAAA;QAE9B,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,CAAA;QAEtC,MAAM,WAAW,GACf,OAAO,CAAC,qBAAqB,CAAC,QAAQ,CAAC,QAAQ,IAAI,OAAO,CAAC,qBAAqB,CAAC,QAAQ,CAAC,QAAQ,CAAA;QAEpG,MAAM,SAAS,GAAG,uBAAuB,CAAC,OAAO,CAAC,SAAS,CAAC,CAAA;QAE5D,UAAU;QACV,SAAS,CAAC,IAAI,CACZ,0BAA0B,CAAC,SAAS,CAAC,kBAAkB,CAAC,SAAS,EAAE;YACjE;gBACE,OAAO;gBACP,SAAS,EAAE,WAAW,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,SAAS;gBACjD,UAAU,EAAE,UAAU;gBACtB,UAAU,EAAE,UAAU;aACvB;SACF,CAAC,CACH,CAAA;QAED,IAAI,WAAW,EAAE;YACf,MAAM,SAAS,GAAG,OAAO,CAAC,qBAAqB,CAAC,QAAQ,CAAC,QAAQ;gBAC/D,CAAC,CAAC,OAAO,CAAC,qBAAqB,CAAC,QAAQ;gBACxC,CAAC,CAAC,OAAO,CAAC,qBAAqB,CAAC,QAAQ,CAAA;YAC1C,MAAM,KAAK,GAAG,OAAO,CAAC,qBAAqB,CAAC,QAAQ,CAAC,QAAQ;gBAC3D,CAAC,CAAE,OAAO,CAAC,qBAAqB,CAAC,QAAkB;gBACnD,CAAC,CAAE,OAAO,CAAC,qBAAqB,CAAC,QAAkB,CAAA;YACrD,MAAM,WAAW,GAAG,OAAO,CAAC,qBAAqB,CAAC,QAAQ,CAAC,QAAQ;gBACjE,CAAC,CAAC,OAAO,CAAC,qBAAqB,CAAC,QAAQ;gBACxC,CAAC,CAAC,OAAO,CAAC,qBAAqB,CAAC,QAAQ,CAAA;YAE1C,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC,CAAA;YAChE,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,KAAK,EAAE,WAAW,EAAE,SAAS,CAAC,CAAC,CAAA;SACzE;QAED,OAAO,SAAS,CAAA;IAClB,CAAC;IAEM,MAAM,CAAC,qBAAqB,CAAC,OAAuB;QACzD,MAAM,SAAS,GAAa,0BAA0B,CAAC,aAAa,CAAC,OAAO,CAAC,CAAA;QAE7E,OAAO;YACL,QAAQ,EAAE,SAAS,CAAC,eAAe,CAAC,SAAS,CAAC;YAC9C,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;SAChB,CAAA;IACH,CAAC;IAED;;;;;OAKG;IACI,MAAM,CAAC,oBAAoB,CAAC,QAAkB,EAAE,OAA+B;QACpF,MAAM,SAAS,GAAa,EAAE,CAAA;QAE9B,MAAM,QAAQ,GAAG,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAA;QACxC,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,CAAA;QAEtC,8DAA8D;QAC9D,MAAM,eAAe,GAAG,IAAI,QAAQ,CAAC;YACnC,IAAI,EAAE,QAAQ,CAAC,IAAI;YACnB,SAAS,EAAE,OAAO,CAAC,mBAAmB,CAAC,QAAQ,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,QAAQ;YAC5E,SAAS,EAAE,QAAQ,CAAC,SAAS;YAC7B,SAAS,EAAE,QAAQ,CAAC,SAAS;SAC9B,CAAC,CAAA;QACF,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,SAAS,EAAE,IAAI,CAAC,EAAE,gBAAgB,CAAC,CAAA;QAE9E,uCAAuC;QACvC,MAAM,EAAE,OAAO,EAAE,UAAU,EAAE,OAAO,EAAE,UAAU,EAAE,GAAG,eAAe,CAAC,uBAAuB,CAC1F,OAAO,CAAC,iBAAiB,CAC1B,CAAA;QAED,IAAI,OAAO,CAAC,MAAM,EAAE;YAClB,SAAS,CAAC,IAAI,CACZ,0BAA0B,CAAC,SAAS,CAAC,kBAAkB,CAAC,QAAQ,EAAE;gBAChE,uBAAuB,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC;gBAC/C,OAAO;gBACP,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC;gBAC9B,OAAO,CAAC,MAAM,CAAC,CAAC;gBAChB,OAAO,CAAC,MAAM,CAAC,CAAC;gBAChB,OAAO,CAAC,MAAM,CAAC,CAAC;aACjB,CAAC,CACH,CAAA;SACF;QAED,mBAAmB;QACnB,SAAS,CAAC,IAAI,CACZ,0BAA0B,CAAC,SAAS,CAAC,kBAAkB,CAAC,mBAAmB,EAAE;YAC3E;gBACE,OAAO;gBACP,SAAS,EAAE,KAAK,CAAC,eAAe,CAAC,SAAS,CAAC;gBAC3C,UAAU,EAAE,KAAK,CAAC,UAAU,CAAC;gBAC7B,UAAU,EAAE,KAAK,CAAC,UAAU,CAAC;gBAC7B,QAAQ;aACT;SACF,CAAC,CACH,CAAA;QAED,MAAM,EAAE,qBAAqB,EAAE,qBAAqB,EAAE,GAAG,IAAI,EAAE,GAAG,OAAO,CAAC,cAAc,CAAA;QACxF,SAAS,CAAC,IAAI,CACZ,GAAG,0BAA0B,CAAC,aAAa,CAAC;YAC1C,OAAO,EAAE,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC;YAC/B,iEAAiE;YACjE,qBAAqB,EAAE,qBAAqB,CAAC,GAAG,CAC9C,cAAc,CAAC,aAAa,CAAC,qBAAqB,CAAC,QAAQ,EAAE,UAAU,CAAC,CACzE;YACD,qBAAqB,EAAE,qBAAqB,CAAC,GAAG,CAC9C,cAAc,CAAC,aAAa,CAAC,qBAAqB,CAAC,QAAQ,EAAE,UAAU,CAAC,CACzE;YACD,GAAG,IAAI;SACR,CAAC,CACH,CAAA;QAED,IAAI,OAAO,CAAC,mBAAmB,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;YAC5C,IAAI,OAAO,CAAC,SAAS,EAAE;gBACrB,SAAS,CAAC,IAAI,CAAC,0BAA0B,CAAC,SAAS,CAAC,kBAAkB,CAAC,MAAM,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA;aAC3F;SACF;aAAM;YACL,SAAS,CAAC,OAAO,CAAC,SAAS,KAAK,IAAI,EAAE,aAAa,CAAC,CAAA;SACrD;QAED,OAAO;YACL,QAAQ,EAAE,SAAS,CAAC,eAAe,CAAC,SAAS,CAAC;YAC9C,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;SAChB,CAAA;IACH,CAAC;IAEM,MAAM,CAAC,0BAA0B,CAAC,OAA4B;QACnE,MAAM,SAAS,GAAG,uBAAuB,CAAC,OAAO,CAAC,SAAS,CAAC,CAAA;QAC5D,MAAM,MAAM,GAAG,uBAAuB,CAAC,OAAO,CAAC,MAAM,CAAC,CAAA;QAEtD,IAAI,QAAgB,CAAA;QACpB,IAAI,OAAO,CAAC,IAAI,EAAE;YAChB,QAAQ,GAAG,0BAA0B,CAAC,SAAS,CAAC,kBAAkB,CAChE,iDAAiD,EACjD,CAAC,MAAM,EAAE,SAAS,EAAE,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE,OAAO,CAAC,IAAI,CAAC,CAC1D,CAAA;SACF;aAAM;YACL,QAAQ,GAAG,0BAA0B,CAAC,SAAS,CAAC,kBAAkB,CAAC,2CAA2C,EAAE;gBAC9G,MAAM;gBACN,SAAS;gBACT,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC;aACvB,CAAC,CAAA;SACH;QACD,OAAO;YACL,QAAQ,EAAE,QAAQ;YAClB,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;SAChB,CAAA;IACH,CAAC;;AA9Sa,oCAAS,GAAc,IAAI,SAAS,CAAC,2BAA2B,CAAC,GAAG,CAAC,CAAA\"}","dts":{"name":"/Users/luozhiwei/project/uniswap/v3-sdk/nonfungiblePositionManager.d.ts","writeByteOrderMark":false,"text":"import { BigintIsh, Percent, CurrencyAmount, Currency, NativeCurrency } from '@uniswap/sdk-core';\r\nimport { Position } from './entities/position';\r\nimport { MethodParameters } from './utils/calldata';\r\nimport { Interface } from '@ethersproject/abi';\r\nimport { PermitOptions } from './selfPermit';\r\nimport { Pool } from './entities';\r\nexport interface MintSpecificOptions {\r\n    /**\r\n     * The account that should receive the minted NFT.\r\n     */\r\n    recipient: string;\r\n    /**\r\n     * Creates pool if not initialized before mint.\r\n     */\r\n    createPool?: boolean;\r\n}\r\nexport interface IncreaseSpecificOptions {\r\n    /**\r\n     * Indicates the ID of the position to increase liquidity for.\r\n     */\r\n    tokenId: BigintIsh;\r\n}\r\n/**\r\n * Options for producing the calldata to add liquidity.\r\n */\r\nexport interface CommonAddLiquidityOptions {\r\n    /**\r\n     * How much the pool price is allowed to move.\r\n     */\r\n    slippageTolerance: Percent;\r\n    /**\r\n     * When the transaction expires, in epoch seconds.\r\n     */\r\n    deadline: BigintIsh;\r\n    /**\r\n     * Whether to spend ether. If true, one of the pool tokens must be WETH, by default false\r\n     */\r\n    useNative?: NativeCurrency;\r\n    /**\r\n     * The optional permit parameters for spending token0\r\n     */\r\n    token0Permit?: PermitOptions;\r\n    /**\r\n     * The optional permit parameters for spending token1\r\n     */\r\n    token1Permit?: PermitOptions;\r\n}\r\nexport declare type MintOptions = CommonAddLiquidityOptions & MintSpecificOptions;\r\nexport declare type IncreaseOptions = CommonAddLiquidityOptions & IncreaseSpecificOptions;\r\nexport declare type AddLiquidityOptions = MintOptions | IncreaseOptions;\r\nexport interface SafeTransferOptions {\r\n    /**\r\n     * The account sending the NFT.\r\n     */\r\n    sender: string;\r\n    /**\r\n     * The account that should receive the NFT.\r\n     */\r\n    recipient: string;\r\n    /**\r\n     * The id of the token being sent.\r\n     */\r\n    tokenId: BigintIsh;\r\n    /**\r\n     * The optional parameter that passes data to the `onERC721Received` call for the staker\r\n     */\r\n    data?: string;\r\n}\r\nexport interface CollectOptions {\r\n    /**\r\n     * Indicates the ID of the position to collect for.\r\n     */\r\n    tokenId: BigintIsh;\r\n    /**\r\n     * Expected value of tokensOwed0, including as-of-yet-unaccounted-for fees/liquidity value to be burned\r\n     */\r\n    expectedCurrencyOwed0: CurrencyAmount<Currency>;\r\n    /**\r\n     * Expected value of tokensOwed1, including as-of-yet-unaccounted-for fees/liquidity value to be burned\r\n     */\r\n    expectedCurrencyOwed1: CurrencyAmount<Currency>;\r\n    /**\r\n     * The account that should receive the tokens.\r\n     */\r\n    recipient: string;\r\n}\r\nexport interface NFTPermitOptions {\r\n    v: 0 | 1 | 27 | 28;\r\n    r: string;\r\n    s: string;\r\n    deadline: BigintIsh;\r\n    spender: string;\r\n}\r\n/**\r\n * Options for producing the calldata to exit a position.\r\n */\r\nexport interface RemoveLiquidityOptions {\r\n    /**\r\n     * The ID of the token to exit\r\n     */\r\n    tokenId: BigintIsh;\r\n    /**\r\n     * The percentage of position liquidity to exit.\r\n     */\r\n    liquidityPercentage: Percent;\r\n    /**\r\n     * How much the pool price is allowed to move.\r\n     */\r\n    slippageTolerance: Percent;\r\n    /**\r\n     * When the transaction expires, in epoch seconds.\r\n     */\r\n    deadline: BigintIsh;\r\n    /**\r\n     * Whether the NFT should be burned if the entire position is being exited, by default false.\r\n     */\r\n    burnToken?: boolean;\r\n    /**\r\n     * The optional permit of the token ID being exited, in case the exit transaction is being sent by an account that does not own the NFT\r\n     */\r\n    permit?: NFTPermitOptions;\r\n    /**\r\n     * Parameters to be passed on to collect\r\n     */\r\n    collectOptions: Omit<CollectOptions, 'tokenId'>;\r\n}\r\nexport declare abstract class NonfungiblePositionManager {\r\n    static INTERFACE: Interface;\r\n    /**\r\n     * Cannot be constructed.\r\n     */\r\n    private constructor();\r\n    private static encodeCreate;\r\n    static createCallParameters(pool: Pool): MethodParameters;\r\n    static addCallParameters(position: Position, options: AddLiquidityOptions): MethodParameters;\r\n    private static encodeCollect;\r\n    static collectCallParameters(options: CollectOptions): MethodParameters;\r\n    /**\r\n     * Produces the calldata for completely or partially exiting a position\r\n     * @param position The position to exit\r\n     * @param options Additional information necessary for generating the calldata\r\n     * @returns The call parameters\r\n     */\r\n    static removeCallParameters(position: Position, options: RemoveLiquidityOptions): MethodParameters;\r\n    static safeTransferFromParameters(options: SafeTransferOptions): MethodParameters;\r\n}\r\n"}}
